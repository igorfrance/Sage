<!DOCTYPE html>
<html
	xmlns:sage="http://www.cycle99.com/schemas/sage/sage.xsd"
	xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<title>Tooltip control tests</title>
		<sage:basehref/>
		<script type="text/javascript" src="assets/lib/aeon/controls/tooltip/tooltip.js"></script>
		<link rel="stylesheet" href="assets/lib/aeon/controls/tooltip/tooltip.css"/>
	</head>
	<body>
		<div id="wrapper">
			<div id="container">
				<div id="home_perspective">
					<hgroup class="title">
						<h1><a href="~/">Sage.ClientSide</a></h1>
					</hgroup>
					<div id="qunit-fixture"></div>
					<h1 id="qunit-header">Tooltip control tests</h1>
					<h2 id="qunit-banner"></h2>
					<div class="testing-area">
						<h4 id="t1" class="tooltip" title="This is tooltip text">Tooltip target 1</h4>
					</div>
					<div id="qunit-testrunner-toolbar"></div>
					<h2 id="qunit-userAgent"></h2>
					<p id="qunit-testresult"></p>
					<ol id="qunit-tests"></ol>
					<script><!--

						aeon.init.on("done", function runTests()
						{
							test("tooltip initialization and api", function testTooltip()
							{
								var popup = $("#tooltip_popup");
								ok(popup);

								var elem1 = $("#t1");
								var ctrl1 = aeon.controls.Tooltip.get(elem1);
								equal(ctrl1 != null, true, "The tooltip should automatically initialize around the element on the page");
								equal(ctrl1.id(), "t1", "The tooltip should properly retrieve the control id");

								var elem2 = $("<h4 id='t2' title='TGenerated by script' data-obscureOnly='true'>Tooltip target 2</h4>");
								$("div.testing-area").append(elem2);
								var ctrl2 = aeon.controls.Tooltip.create(elem2);
								equal(ctrl2 != null, true, "The tooltip should automatically initialize around the element on the page");
								equal(ctrl2.id(), "t2", "The tooltip should properly retrieve the control id");

								var ctrl3 = aeon.controls.Tooltip.create();
								ctrl3.id("t3");
								ctrl3.element().text("Tooltip target 3");
								$("div.testing-area").append(ctrl3.element());
								equal(ctrl3 != null, true, "The tooltip should automatically initialize around the element on the page");
								equal(ctrl3.id(), "t3", "The tooltip should properly retrieve the control id");

								ctrl1.show();
								ok(popup.is(":visible"), "The tooltip popup should show");
								ctrl1.hide();

								ctrl3.show();
								ok(!popup.is(":visible"), "The tooltip popup should not show for elements with no title text");
								ctrl3.hide();

								ctrl1.show();
								elem1.mouseout();
								ok(!popup.is(":visible"), "The tooltip popup should hide automatically");

								ctrl1.set("hideOn", "click");
								ctrl1.show();
								elem1.mouseout();
								ok(popup.is(":visible"), "The tooltip popup should remain visible after mouseout if 'hideOn' is set to 'click'");

								popup.click();
								ok(!popup.is(":visible"), "The popup should hide on click if 'hideOn' is set to 'click'");

								ctrl2.set("delay", 0);
								elem2.mouseover();
								ok(!popup.is(":visible"), "The tooltip popup should not show for fully visible elements if obscureOnly=true");
							});
						});

					--></script>
				</div>
			</div>
		</div>
	</body>
</html>
