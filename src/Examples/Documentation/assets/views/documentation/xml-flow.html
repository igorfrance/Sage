<!DOCTYPE html>
<html
	xmlns:sage="http://www.cycle99.com/schemas/sage/sage.xsd"
	xmlns:mod="http://www.cycle99.com/schemas/sage/modules.xsd"
 	xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<sage:basehref/>
		<title>XML Transform Flow</title>
	</head>
	<body>

		<div class="page">
			<mod:Sidebar>
				<mod:config>
					<mod:current><sage:url ref="xml-flow"/></mod:current>
				</mod:config>
			</mod:Sidebar>
			<section class="content">
				<header>
					<span>XML Transform Flow</span>
				</header>
				<details>

					<summary>
						When working with XML documents, Sage takes the document through several steps of processing before it is returned to the caller. With controller view templates, the resulting document is processed and transformed even further.
					</summary>

					<div class="marginframe">
						<img src="${assetpath}images/diagrams/xml-flow.png" alt="XML transform flow overview"/>
					</div>

					<ol>
						<li>
							<h5><a href="${url:link(xml-flow-localize)}">Localize</a> *</h5>
							<p>
								The localized version of the source document is opened. Depending on the settings, this step is done either inline or as a part of the batch process for the whole project. The localization is done and a localized version opened only if the document uses entities from the Sage's <a href="href:${url:link(internationalization.html">internationalization</a> namespace.
							</p>
						</li>
						<li>
							<h5><a href="url:link(xml-flow-copy-tree)}">Contextualize</a></h5>
							<p>
								Every xml document opened through Sage will be processed node by node as a tree, starting at the root and drilling down recursively through child nodes. Registered node and text handlers have full control over how the entity they are handling will appear in the document.
							</p>
						</li>
						<li>
							<h5><a href="${url:link(xml-flow-expand-modules)}">Expand modules</a></h5>
							<p>
								Each module in the view template is executed as a backend <code>IModule</code> instance. The module may or may not have a specific backend component. In case the module doesn't have one, the default <code>NullModule</code> is used. The modules that do have a backend component will typically append content into the module element's data node, altough they can potentically modify the module element in any way.
							</p>
						</li>
						<li>
							<h5><a href="${url:link(xml-flow-xslt-transform)}">XSLT Transform</a></h5>
							<p>
								The prepared and processed view template is finally transformed using the XSLT template associated with the view. Modules may provide their own XSLT which will then be used to render the HTML associated with the modules in the view template.
							</p>
						</li>
					</ol>
					<ul class="small clear">
						<li>&#160;&#160;* only XML document referencing internationalization namespace</li>
					</ul>


				</details>
			</section>
		</div>
	</body>
</html>
