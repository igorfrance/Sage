<!DOCTYPE html>
<html
	xmlns:sage="http://www.cycle99.com/projects/sage"
	xmlns:mod="http://www.cycle99.com/projects/sage/modules"
	xmlns:intl="http://www.cycle99.com/projects/sage/internationalization"
 	xmlns:xi="http://www.w3.org/2003/XInclude"
	xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<sage:basehref/>
		<title>Step 2: Copy Xml Tree - Document transform flow</title>
	</head>
	<body>

		<h1>Step 2: Copy Xml Tree</h1>

		<mod:BreadCrumb>
			<mod:config>
				<mod:current><sage:url ref="xml-flow-copy-tree"/></mod:current>
			</mod:config>
		</mod:BreadCrumb>


		<div class="imageframe right">
			<img src="{assetpath}/images/diagrams/xml-transform-flow-copy-tree.jpg" alt="Step 2: Copy XML Tree"/>
		</div>

		<p>
			In this step, the localized template document is pre-processed by resolving and expanding any context-dependent
			entities (XML elements, attributes or text), before returning it to the caller.
		</p>
		<p>
			The document tree is processed recursively node by node, using a number of registered handlers functions to process them.
		</p>
		<p>
			In order to make this process as flexible and extendible as possible, the handler functions are implemented
			as delegates, and any method that matches the designated delegate signature can be registered as a node or text
			handler by decorating it with the appropriate attribute.
		</p>
		<p>
			Sage provides default node handlers whose standard behavior is to simply copy the full tree as-is. Sage also
			provides a number of node and text handlers for use anywhere within XML documents in the project:
		</p>
		<table class="indent definition">
			<caption>Node handlers</caption>
			<tr valign="top">
				<th><code>&lt;sage:link/&gt;</code></th>
				<td>
					This element gets its <code>href</code> attribute set, as resolved from reading the it's other attributes.
					Read more about it in <a sage:attrib="href:url(linking)">linking</a>.
				</td>
			</tr>
			<tr valign="top">
				<th><code>&lt;sage:url/&gt;</code></th>
				<td>
					This element gets substituted with URL text as resolved from it's attributes.
					Read more about it in <a sage:attrib="href:url(linking)">linking</a>.
				</td>
			</tr>
			<tr valign="top">
				<th><code>@sage:attrib</code></th>
				<td>
				This universal attribute is used to instruct Sage to generate the value of another attribute.
				Read more about it in <a sage:attrib="href:url(linking)">linking</a>.
				</td>
			</tr>
		</table>
		<table class="indent definition">
			<caption>Text handlers</caption>
			<tr valign="top">
				<th><code>{{assetpath}}</code></th>
				<td>
					Inserts the web-relative resolved value of the asset path configuration property. Read more about it in
					<a sage:attrib="href:url(configuration-project)">project configuration</a>.
				</td>
			</tr>
			<tr valign="top">
				<th><code>{{sharedassetpath}}</code></th>
				<td>
					Inserts the web-relative resolved value of the shared asset path configuration property. Read more about it in
					<a sage:attrib="href:url(configuration-project)">project configuration</a>.
				</td>
			</tr>
			<tr valign="top">
				<th><code>{{modulepath}}</code></th>
				<td>
					Inserts the web-relative resolved value of the module path configuration property. Read more about it in
					<a sage:attrib="href:url(configuration-project)">project configuration</a>.
				</td>
			</tr>
			<tr valign="top">
				<th><code>{{basehref}}</code></th>
				<td>
					Inserts the fully qualified URL of the current web application. For example: 'http//sage.cycle99.com'.
				</td>
			</tr>
			<tr valign="top">
				<th><code>{{locale}}</code></th>
				<td>
					Inserts the name of the current locale.
				</td>
			</tr>
			<tr valign="top">
				<th><code>{{category}}</code></th>
				<td>
					Inserts the name of the current category.
				</td>
			</tr>
		</table>

		<p>
			To learn how to integrate your own custom node and text handlers, visit the
			<a sage:attrib="href:url(extensibility-handlers)">handlers configuration</a> page.
		</p>

	</body>
</html>
