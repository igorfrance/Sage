/*!
 * atom.js  v.2.0
 *
 * This library depends on jQuery. Make sure jQuery 1.8 or higher is included before this script.
 *
 * Copyright 2012 Igor France
 * Licensed under the MIT License
 *
 */
var atom=new function(){function o(){}var i={},r=window.jQuery,n=new function(){function t(){return arguments.length?typeof arguments[0]:null}return t.registerNamespace=function(n){for(var i=n.split("."),r=window,t=0;t<i.length;t++)r[i[t]]==null&&(r[i[t]]={}),r=r[i[t]]},t.isArray=function(t){return t==null?!1:t.constructor==Array||t!=window&&!n.isString(t)&&!n.isFunction(t)&&n.isNumber(t.length)},t.isBoolean=function(n){return n==null?!1:t(n)=="boolean"||n.constructor==Boolean},t.isFunction=function(i){return i==null?!1:t(i)=="function"||i.constructor==Function||!n.isString(i)&&Boolean(String(i).match(/\bfunction\b/))},t.isNull=function(n){return n==null||n==undefined},t.isNumber=function(n){return n==null?!1:t(n)=="number"&&isFinite(n)||n.constructor==Number},t.isNumeric=function(n){return!isNaN(parseFloat(n))},t.isDate=function(t){return t==null?!1:n.isFunction(t.getDate)&&n.isFunction(t.getTime)},t.isObject=function(i){return i==null||i==undefined?!1:t(i)=="object"&&i.constructor!=String&&i.constructor!=Number||n.isFunction(i)},t.isString=function(n){return n==null?!1:t(n)=="string"||n!=null&&n.constructor==String},t.isNode=function(t){return n.isObject(t)&&n.isNumber(t.nodeType)},t.isDocument=function(t){return n.isNode(t)&&t.nodeType==9},t.isElement=function(t){return n.isNode(t)&&t.nodeType==1},t.isHtmlElement=function(t){return n.isElement(t)&&n.isString(t.className)},t.instanceOf=function(t,i){if(!n.isObject(t)||!n.isFunction(i))return!1;if(t instanceof i||t.__type&&t.__type.constructor==i)return!0;if(t.__type&&t.__type.base!=null)for(var r=t;r=r.__type.base;)if(r.__type.constructor==i)return!0;return!1},t.implements=function(t,i){var r=!0,u;if(t==null||i==null)r=!1;else for(u in i)if(i.hasOwnProperty(u)&&!n.isFunction(t[u])){r=!1;break}return r},t.extend=function(n,t,i){if(i=i||!1,n&&t)for(var r in t)t.hasOwnProperty(r)&&(n[r]==undefined||i)&&(n[r]=t[r]);return n},t},t=new function(){function i(t,i,r,u){for(var e=String(t),o=i-e.length,f=[];f.length<o;)f.push(r);return f=f.join(n.EMPTY),u==2?e+f:f+e}var n=this,t;n.EMPTY="",this.format=function(r){var u=f.fromArguments(arguments,1);return t==null&&(t=/\{(\d+)([$#])?(\d+)?([+-])?\}/g),String(r).replace(t,function(){var t,r;try{t=String(u[arguments[1]])}catch(f){t=n.EMPTY}return arguments[2]!=n.EMPTY&&arguments[3]!=n.EMPTY&&(r=arguments[4]=="+"?2:1,t=i(t,arguments[3],arguments[2]=="#"?"0":" ",r)),t})},this.isEmpty=function(t){return t==null||n.trim(t)==n.EMPTY},this.trim=function(n,t){t==null&&(t="\\s");var i=new RegExp("^["+t+"]*([\\s\\S]*?)["+t+"]*$");return String(n).replace(i,"$1")},this.padLeft=function(n,t,i){i==undefined&&(i=" ");for(var r=String(n);r.length<t;)r=i+r;return r},this.padRight=function(n,t,i){i==undefined&&(i=" ");for(var r=String(n);r.length<t;)r=r+i;return r},this.repeat=function(t,i){for(var u=[],r=0;r<i;r++)u.push(t);return u.join(n.EMPTY)},this.concat=function(){for(var i=[],t=0;t<arguments.length;t++)i.push(arguments[t]);return i.join(n.EMPTY)},String.prototype.trim=function(t){return n.trim(this,t)},String.prototype.format=function(){return n.format(this,arguments)}},u,s;Number.random=function(){var i=0,t=Number.MAX_VALUE,r=!0,u;return arguments.length==1&&(n.isBoolean(arguments[0])?r=!arguments[0]:n.isNumber(arguments[0])&&(t=arguments[0])),arguments.length==2&&(n.isBoolean(arguments[1])?(t=parseInt(arguments[0])||0,r=!arguments[1]):n.isNumber(arguments[1])&&(i=parseInt(arguments[0])||0,t=arguments[1])),arguments.length==3&&(i=parseInt(arguments[0])||0,t=parseInt(arguments[1])||0,r=!arguments[2]),u=i+(t-i)*Math.random(),r?Math.round(u):u};var f=new function(){this.fromArguments=function(t,i,r){var u,f;if(t==null||undefined)return[];for(n.isArray(t)||(t=[t]),t.length==1&&n.isArray(t[0])&&(t=t[0]),isNaN(parseInt(i))&&(i=0),isNaN(parseInt(r))&&(r=t.length-1),u=[],f=i;f<=r;f++)u.push(t[f]);return u.length==1&&n.isArray(u[0])&&(u=u[0]),u},this.flatten=function(){for(var r=[],t,i,u=0;u<arguments.length;u++){if(t=arguments[u],!n.isArray(t)){r.push(t);continue}for(i=0;i<t.length;i++)n.isArray(t[i])?r.push.apply(r,this.flatten(t[i])):r.push(t[i])}return r};var t={contains:function(n){return this.indexOf(n)>=0},indexOf:function(n,t){var r=isNaN(t)?0:t,i;if(r<0||r>this.length-1)return-1;for(i=r;i<this.length;i++)if(this[i]==n)return i;return-1},lastIndexOf:function(n,t){var r=isNaN(t)?this.length-1:t,i;if(r<0||r>this.length-1)return-1;for(i=r;i>=0;i--)if(this[i]==n)return i;return-1},every:function(n,t){var i,r;if(typeof n!="function")throw new Error("The callback argument is not a function!");for(t=t||this,i=0;i<this.length;i++)if(r=n.call(t,this[i],i,this),!r)return!1;return!0},some:function(n,t){var i,r;if(typeof n!="function")throw new Error("The callback argument is not a function!");for(t=t||this,i=0;i<this.length;i++)if(r=n.call(t,this[i],i,this),r)return!0;return!1},filter:function(n,t){var r,i,u;if(typeof n!="function")throw new Error("The callback argument is not a function!");for(r=[],t=t||this,i=0;i<this.length;i++)u=n.call(t,this[i],i,this),u&&r.push(this[i]);return r},forEach:function(n,t){if(typeof n!="function")throw new Error("The callback argument is not a function!");t=t||this;for(var i=0;i<this.length;i++)this[i]!==undefined&&n.call(t,this[i],i,this)},map:function(n,t){var r,i;if(typeof n!="function")throw new Error("The callback argument is not a function!");for(r=[],t=t||this,i=0;i<this.length;i++)this[i]!==undefined&&r.push(n.call(t,this[i],i,this));return r}};n.extend(Array.prototype,t)},p=new function(){return function(){var r="Error",u=String(arguments[0]),t=undefined,i;return arguments.length==1?n.isObject(arguments[0])&&(r=arguments[0].name||r,u=arguments[0].message||u,t=arguments[0].data||t):arguments.length>1&&(n.isString(arguments[0])&&(r=String(arguments[0])),n.isString(arguments[1])&&(u=String(arguments[1])),n.isNull(arguments[2])||(t=String(arguments[2]))),i=new Error,i.name=r,i.message=u,t!=undefined&&(i.data=t),i}},c=new function(){function i(i,r){var e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),u=n.isDate(r)?new Date(r):i?new Date(a):new Date(e),o;if(i)if(/^\d+$/.test(i))u=new Date(parseInt(i));else if(/^([+-])(\d+|\d*\.\d*)([smhdMy])$/.test(i)){var v=RegExp.$1,h=parseFloat(RegExp.$2),c=RegExp.$3,y=t.concat("get",s[c]),p=t.concat("set",s[c]),l=Date.prototype[y].apply(u),w=v=="-"?l-h:l+h;Date.prototype[p].call(u,w)}else for(o in f)f.hasOwnProperty(o)&&new function(){var n=f[o];i=i.replace(n.regexp,function(){return u=n.handler(u,arguments),t.EMPTY})};return u}function h(i,r){return n.isDate(i)?r?String(r).replace(/yyyy/g,i.getFullYear().toString()).replace(/yy/g,i.getFullYear().toString().substring(2,4)).replace(/MMMM/g,e[i.getMonth()]).replace(/MMM/g,e[i.getMonth()].substring(0,3)).replace(/MM/g,t.padLeft(i.getMonth()+1,2,0)).replace(/M/g,(i.getMonth()+1).toString()).replace(/dd/g,t.padLeft(i.getDate(),2,0)).replace(/d/g,i.getDate().toString()).replace(/hh/g,t.padLeft(i.getHours(),2,0)).replace(/h/g,i.getHours().toString()).replace(/mm/g,t.padLeft(i.getMinutes(),2,0)).replace(/m/g,i.getMinutes().toString()).replace(/ss/g,t.padLeft(i.getSeconds(),2,0)).replace(/s/g,i.getSeconds().toString()).replace(/wwww/g,o[i.getDay()]).replace(/www/g,o[i.getDay()].substr(0,3)):c.apply(i):"NaN"}function u(t){return n.isDate(t)?t:new Date}var e=["January","February","Match","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={s:"Seconds",m:"Minutes",h:"Hours",d:"Date",M:"Month",y:"FullYear"},f={dayAndMonth1:{regexp:new RegExp("\\b(\\d{1,2})(-|/|\\.)(\\d{1,2})(?:\\2(\\d{2}))?\\b"),handler:function(n,t){var u=parseInt(t[1]),i=parseInt(t[3]),r=t[2];return i>12||r=="/"?(n.setDate(i),n.setMonth(u-1)):(n.setDate(u),n.setMonth(i-1)),isNaN(r)||n.setYear(Number(String((new Date).getFullYear()).substring(0,2)+String(r))),n}},dayAndMonth2:{regexp:new RegExp("(?:\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\s*)?\\b(jan|feb|mar|jun|jul|aug|sep|oct|nov|dec)(?:[a-z]+)?(?:(?:.|-)?\\s*\\b(\\d{1,2})(?:[a-z]{2}|.|-)?\\b)?","i"),handler:function(n,t){var f=t[2].toLowerCase(),e=r.inArray(f,"jan|feb|mar|jun|jul|aug|sep|oct|nov|dec".split("|")),i,u;return n.setMonth(e),i=parseInt(t[1]),u=parseInt(t[3]),isNaN(i)||n.setDate(i),isNaN(u)||n.setDate(u),n}},time:{regexp:new RegExp("(?:\\b|T)\\b(\\dd{2}):(\\d{2}):(\\d{2})\\b"),handler:function(n,t){return n.setHours(parseInt(t[1])),n.setMinutes(parseInt(t[1])),n.setSeconds(parseInt(t[1])),n}},year:{regexp:new RegExp("\\b(\\d{4})(?:\\b|T)"),handler:function(n,t){return n.setYear(parseInt(t[1])),n}},today:{regexp:new RegExp("^today$"),handler:function(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}}},c=Date.prototype.toString;return Date.prototype.toString=function(n){return h(this,n)},i.format=h,i.year=function(n){return u(n).getFullYear()},i.month=function(n){return u(n).getMonth()},i.day=function u(n){return u(n).getDate()},i.weekday=function(n){return u(n).getDay()},i.hours=function(n){return u(n).getHours()},i.minutes=function(n){return u(n).getMinutes()},i.seconds=function(n){return u(n).getSeconds()},i.time=function(n){return u(n).getTime()},i};Function.EMPTY=new Function,Function.NAME_EXPR=/^[\s\S$]*?function[\s\n]+(([\w.$]*)[\s\n]*\((.*)\))\W[\s\S]*$/,Function.getName=function(i,r,u){if(!n.isFunction(i)&&(i=arguments.callee.caller,!n.isFunction(i)))return null;var f=String(i).replace(Function.NAME_EXPR,function(){var n=arguments[2]?arguments[2]:"anonymous",i=arguments[2]?arguments[1]:[n,"(",arguments[3],")"].join(t.EMPTY);return r&&!u?i:r&&u?arguments[3]:n});return f.replace(/([\w\$])\$([\w\$])/g,"$1.$2")},Function.callerName=function(){return Function.getName(arguments.callee.caller.caller)},Function.stackTrace=function(t,i){for(var f=t||arguments.callee.caller,o=[],s=[],h=0,r;f!=null;){if(i&&h>=i)break;else if(s.contains(f))break;var c=Function.getName(f),e=[],u=f.arguments;for(r=0;r<u.length;r++)n.isFunction(u[r])&&n.isFunction(u[r].getName)?e.push(u[r].getName(!0)):n.isArray(u[r])?e.push("array[{0}]".format(u[r].length)):n.isObject(u[r])?e.push("object{..}"):n.isNull(u[r])?e.push("null"):n.isString(u[r])?e.push(u[r].length<200?'"{0}"'.format(u[r]):"[string({0})]".format(u[r].length)):u[r]==undefined?e.push("undefined"):e.push(u[r]);s.push(f),o.unshift(Function.getName(f)+"("+e.join(", ")+")");try{f=f.caller}catch(l){break}h++}return o.toString=function(n){return this.join(n||"\n")},o},o.extend=function(t){var i,u,r;if(t==null||t==this||t.prototype==null)return t;i=this,u=n.isFunction(t)?t:t.constructor,t.prototype.__type={base:i.prototype,constructor:u};for(r in i.prototype)t.prototype.hasOwnProperty(r)||(t.prototype[r]=i.prototype[r]);return t.extend=t.extend||o.extend,t},o.prototype.construct=function(){if(this.__type!=null){this.$this=this.$this||this;var n=this.$this.__type.base.constructor;this.$this=this.$this.__type.base,n.apply(this,f.fromArguments(arguments)),delete this.$this}},o.prototype.base=function(n){if(this.__type==null)return null;for(var i=null,t=this,r=arguments.callee.caller;t.__type&&!i;)t.__type.base[n]!=r&&(i=t.__type.base[n]),t=t.__type.base;return typeof i=="function"?i.apply(this,Array.prototype.splice(arguments,1)):null},u=o.extend(function(){this.__events=[],this.__listeners={};for(var n=0;n<arguments.length;n++)this.registerEvent(arguments[n])}),u.prototype.registerEvent=function(){for(var t,n=0;n<arguments.length;n++)t=arguments[n],this.hasEvent(t)||(this.__events.push(t),this.__listeners[t]=[])},u.prototype.hasEvent=function(n){return this.__events.contains(n)},u.prototype.hasListener=function(n,t){if(this.hasEvent(n))for(var i=0;i<this.__listeners[n].length;i++)if(this.__listeners[n][i]==t)return!0;return!1},u.prototype.addListener=function(n,t){return this.hasEvent(n)?this.hasListener(n,t)||this.__listeners[n].push(t):e.error("Did not add event '{0}' because the current object only supports '{1}'",n,this.__events.join(", ")),this},u.prototype.on=u.prototype.addListener,u.prototype.removeListener=function(t,i){if(this.hasEvent(t))if(n.isFunction(i)){for(var r=0;r<this.__listeners[t].length;r++)if(this.__listeners[t][r]==i)return this.__listeners[t].splice(r,1),this}else this.__listeners[t]=[];return this},u.prototype.off=u.prototype.removeListener,u.prototype.fireEvent=function(t,i){var u=null,e=null,r,f;if(n.instanceOf(t,h.Event)?(e=t.type,u=t):(i==null&&(i=this.createEventData()),e=t,u=new h.Event(this,e,i)),r=this.__listeners[e],r!=null&&r.length!=0){for(f=0;f<r.length;f++)if(n.isFunction(r[f])&&(r[f](u),u.cancel))break;return u}return null},u.prototype.fire=u.prototype.fireEvent,u.prototype.createEventData=function(){return{}},u.prototype.toString=function(){var t=[],n;for(n in this.__listeners)this.__listeners.hasOwnProperty(n)&&t.push("{0}: {1} listeners".format(n,this.__listeners[n].length));return"Dispatcher: {{0}}".format(t.join(", "))},s=o.extend(function(){}),s.prototype.getValue=function(t,i,r,u){if(i=i&&i.jquery?i[0]:i,r=r&&r.jquery?r[0]:r,n.isHtmlElement(r)){if(r.getAttribute("data-"+t))return r.getAttribute("data-"+t);if(r.getAttribute(t))return r.getAttribute(t)}else{if(r&&r[t]!=undefined)return r[t];if(n.isHtmlElement(i)){if(i.getAttribute("data-"+t))return i.getAttribute("data-"+t);if(i.getAttribute(t))return i.getAttribute(t)}else if(i&&i[t]!=undefined)return i[t]}return u},s.prototype.getBoolean=function(n,t,i,r){var u=String(this.getValue(n,t,i,r)).toLowerCase();return u=="1"||u=="true"||u=="yes"},s.prototype.getNumber=function(t,i,r,u){var f=this.getValue(t,i,r,u);return n.isNumeric(f)?parseInt(f):0},s.prototype.getString=function(n,t,i,r){return String(this.getValue(n,t,i,r))},s.prototype.getFunction=function(t,i,r,u){var f=this.getValue(t,i,r,u);return n.isFunction(f)?f:null};var w=function(u){function c(){var n=document.createElement("div");return n.setAttribute("id",i.dom.uniqueID(n)),String(u.expression).trim().replace(/\./g," ").match(/([\w\- ]+)/)&&n.setAttribute("className",RegExp.$1),n}function s(i,r){var c=arguments[2]||0,f=t.repeat("  ",c),u,s;if(i==null)if(n.isFunction(this.createElement))i=this.createElement(r);else throw Error(t.format("No element has been provided and the control '{0}' doesn't have 'createElement' method, therefore a new element can't be created",Function.getName(this)));return u=o(i),u==null?(s=v(i),u=new s(i,r),n.isFunction(u.init)&&u.init(),h(u),e.debug("{0}Created control {1}",f,u)):e.warn("{0}Not creating another instance of {1} for {2}.",f,u,i),u}function h(t){n.instanceOf(t,l)&&(t.$element.attr("id",a.uniqueID(t.$element)),u.instances.contains(t)||u.instances.push(t))}function v(n){var i=f.defaultConstructor,e=r(n),t;for(t in u.registeredConstructors)if(u.registeredConstructors.hasOwnProperty(t)&&e.is(t)){i=u.registeredConstructors[t];break}return i}function o(t){var e,o,i,f;if(t==null||(t.jquery&&(t=t[0]),n.isString(t)&&(t=r(t)[0]),t==null))return null;for(e=n.isString(t),o=n.isElement(t),i=0;i<u.instances.length;i++)if((f=u.instances[i],o&&f.element()[0]==t)||e&&f.id()==t)return f;return null}function y(t,i){return!n.isString(t)&&!n.isFunction(i)?e.warn("Arguments expression:String and constructor:Function both need to be used"):(u.registeredConstructors[t]=i,null)}u.create=u.create||s,u.createElement=u.createElement||c,u.get=u.get||o,u.register=u.register||y,u.dispose=u.dispose||Function.EMPTY,u.instances=[],u.registeredConstructors={},u.registerInstance=h;var f=this;f.type=u,f.defaultConstructor=u.Control||u,f.typeName=Function.getName(u),f.expression=u.expression,f.async=u.async===!0,f.getInstance=o,f.createInstance=s,this.checkType=function(t){if(!n.isFunction(t))return!1;if(f.defaultConstructor==t)return!0;for(var i in u.registeredConstructors)if(u.registeredConstructors.hasOwnProperty(i)&&u.registeredConstructors[i]==t)return!0;return!1},this.redraw=function(){n.isFunction(u.redraw)&&u.redraw()},this.setup=function(n){u.setup&&u.async?u.setup(n):u.setup?(u.setup(),n()):n()},this.dispose=function(){u.dispose&&u.dispose()}},b=function(){var t=[],f=[],u=-1;this.redraw=function(){for(var n=0;n<t.length;n++)t[n].redraw()},this.register=function(i){e.assert(n.isObject(i),"Argument 'control' should be an object that describes the control or the control itself");var r=new w(i);return t.push(r),f.push(r.expression),e.info("Registered control {0}",n.isFunction(i)?Function.getName(i):Function.getName(i.constructor)),i},this.get=function(i,u){var e,o,f;if(i==null||(i.jquery&&(i=i[0]),n.isString(i)&&(i=r(i)[0]),i==null))return null;for(e=null,o=0;o<t.length;o++)if(f=t[o],u!=null){if(f.checkType(u)||f.typeName==u||f.expression.indexOf(u)!=-1){e=f.getInstance(i);break}}else if(e=f.getInstance(i),e!=null)break;return e},this.setup=function(i){var u,f,r,e;if(t.length==0){n.isFunction(i)&&i();return}for(u=this,f=0,r=0;r<t.length;r++)e=t[r],e.setup(function(){++f==t.length&&(u.update(),n.isFunction(i)&&i())})},this.dispose=function(){for(var n=0;n<t.length;n++)t[n].dispose()},this.update=function(n){var h,o,c,l,s;if(u++,u<10){if(h=r(f.join(", "),n||document),h.length>0){for(u==0&&e.groupCollapsed("Creating element instances for registered controls"),o=0;o<t.length;o++)for(c=t[o],l=h.filter(c.expression),s=0;s<l.length;s++)c.createInstance(l[s],null,u);u==0&&e.groupEnd()}}else i.log.warn("An attempt was made to recurse into ControlRegistry.update deeper than 10 levels. Check the code for infinite loops");u--}},l=u.extend(function(n){this.construct(f.fromArguments(arguments,1)),this.$element=r(n)});l.prototype.id=function(t){return n.isString(t)&&this.$element.attr("id",t),this.$element.attr("id")},l.prototype.element=function(){return this.$element},l.prototype.toString=function(){var n=Function.getName(this.constructor);if(this.$element.length==0)return t.format("{0}(null)",n);var i=this.id(),r=this.$element.attr("class"),u=String(this.$element.prop("tagName")).toLowerCase();return t.format('{0}("{1}{2}{3}")',n,u,r?"."+r.replace(/\s+/,"."):t.EMPTY,i?"#"+i:t.EMPTY)};var k=new function(){function n(){return arguments.length==0?(u==null&&(u=n.parseDocument(document)),u):n.computed(arguments[0])}var u=null,f={text:["font-family","font-size","font-weight","font-style","color","text-transform","text-decoration","letter-spacing","word-spacing","line-height","text-align","vertical-align","direction","column-count","column-gap","column-width"],background:["background-color","background-image","background-repeat","background-position","background-attachment","opacity"],box:["width","height","top","right","bottom","left","margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","-moz-border-top-radius","-moz-border-right-radius","-moz-border-bottom-radius","-moz-border-left-radius","outline-top-width","outline-right-width","outline-bottom-width","outline-left-width","outline-top-color","outline-right-color","outline-bottom-color","outline-left-color","outline-top-style","outline-right-style","outline-bottom-style","outline-left-style"],layout:["position","display","visibility","z-index","overflow","overflow-x","overflow-y","overflow-clip","white-space","clip","float","clear","-moz-box-sizing"],other:["cursor","list-style-image","list-style-position","list-style-type","marker-offset","user-focus","user-select","user-modify","user-input"]};return n.reset=function(){u=null},n.parseDocument=function(t){for(var f={},r,u,i=0;i<t.styleSheets.length;i++){r=n.parseStylesheet(t.styleSheets[i]);for(u in r)f[u]=r[u]}return f},n.parseStylesheet=function(n){for(var r={},i=n.rules||n.cssRules,t=0;t<i.length;t++)i[t].selectorText&&(r[i[t].selectorText]=i[t]);return r},n.computed=function(n,t){var i={},u,f,e,o;if(n&&(n=r(n)[0]),!n)return i;for(u=document.defaultView.getComputedStyle(n,null),f=0;f<u.length;f++)e=u[f],o=e.replace(/\-([a-z])/g,function(n,t){return t.toUpperCase()}),i[o]=u.getPropertyValue(e);return t?i[t]:i},n.findRules=function(t){var r=n(),u=[],f,i;if(t){f=new RegExp(t);for(i in r)r.hasOwnProperty(i)&&i.match(f)&&u.push({selector:i,css:r[i]})}return u},n.getRule=function(n){return u[n]},n.getStyle=function(i){var r=n.getRule(i);return r?r.style.cssText:t.EMPTY},n.getProperty=function(i,r){var u=n.getRule(i);return u?u.style[r]:t.EMPTY},n.copyStyles=function(t,r,u){var o,s,h,e;if(t&&t.jquery&&(t=t[0]),r&&r.jquery&&(r=r[0]),t&&r){o=n.computed(t);for(s in f)if(!u||s==u)for(h=0;h<f[s].length;h++)(e=f[s][h],o[e]!=undefined)&&(r.style[e]=o[e],i.log("{0}: {1}",e,o[e]))}},n},a=new function(){function h(n){r(n).hide()}function l(n){for(var f,u,t=0;t<i.length;t++)for(f=0;f<i[t].element.length;f++)if(u=i[t].element.eq(f),u.is(":visible")){var e=i[t].delay,o=r.proxy(i[t].hide,this,u),s=u.is(n.target)||u.has(n.target).length!=0;s?e&&clearTimeout(i[t].delayId):e?i[t].delayId=setTimeout(o,e):o()}}var o={},i=[],s=!1,e=new u("selectionchange");return e.registerAutoHide=function(t){if(t){var u={element:null,delay:0,hide:h};t.jquery?u.element=r(t):(u.element=t.element,n.isNumber(t.delay)&&(u.delay=t.delay),n.isFunction(t.hide)&&(u.hide=t.hide)),i.push(u),s||(r(document).bind("mousedown mouseup click keydown keyup",l),s=!0)}},e.isChrome=window.navigator.userAgent.indexOf("Chrome")!=-1,e.isTouchDevice=!!("ontouchstart"in window)||!!("onmsgesturechange"in window),e.uniqueID=function(n){if(n&&n.jquery&&(n=n[0]),n==null)return null;if(t.isEmpty(n.id)){for(var i=c.time();o[i]!=null;)i++;o[i]=i,n.id="u"+i}return n.id},e.unselectable=function(){for(var e=(n in{"false":!0,off:!0}),n=e?t.EMPTY:"none",u=f.fromArguments(arguments),i=0;i<u.length;i++)r(u[i]).css({"user-select":n,"-o-user-select":n,"-moz-user-select":n,"-khtml-user-select":n,"-webkit-user-select":n,"-ms-user-select":n})},r.fn.unselectable=function(n){return this.each(function(){e.selectable(n)})},e},e=new function(){function i(i){var e="log",a=arguments.length,v=1,s=a-1,c=String(arguments[s]),y,h,l;for((o.contains(c)||u.contains(c))&&(e=c,s=a-2),e!="dir"&&s>=v&&(y=f.fromArguments(arguments,v,s),i=t.format(i,y)),h=0;h<r.length;h++)l=r[h],n.isFunction(l[e])&&l[e](i)}var e={},r=[],o=["log","debug","info","warn","error","group","groupCollapsed","groupEnd"],u=[];return i.trace=function(n){var r=Function.stackTrace(arguments.callee.caller),u,t;if(arguments.length>0){for(u=f.fromArguments(arguments,1),i.group(n,u),t=0;t<r.length;t++)i.debug(r[t]);i.groupEnd()}else i(r.toString())},i.assert=function(n,t){var r=f.fromArguments(arguments,2);n===!1&&i(t,r,"error")},i.time=function(n){if(console.time){console.time.apply(console,arguments);return}n&&(e[n]=(new Date).getTime())},i.timeEnd=function(n){if(console.timeEnd){console.timeEnd.apply(console,arguments);return}e[n]&&i.info("{0}: {1}.ms",n,(new Date).getTime()-e[n])},i.clear=function(){console.clear()},i.log=function(n){i(n,f.fromArguments(arguments,1),"log")},i.debug=function(n){i(n,f.fromArguments(arguments,1),"debug")},i.groupCollapsed=function(n){i(n,f.fromArguments(arguments,1),"groupCollapsed")},i.group=function(n){i(n,f.fromArguments(arguments,1),"group")},i.groupEnd=function(){i(t.EMPTY,"groupEnd")},i.info=function(n){i(n,f.fromArguments(arguments,1),"info")},i.warn=function(n){i(n,f.fromArguments(arguments,1),"warn")},i.error=function(n){i(n,f.fromArguments(arguments,1),"error")},i.dir=function(n){i(n,f.fromArguments(arguments,1),"dir")},i.register=function(t,i){if(t==null||r.contains(t)||r.push(t),i!==!0)for(var f in t)t.hasOwnProperty(f)&&n.isFunction(t[f])&&(u.contains(f)||u.push(f))},i.unregister=function(t){var o=r.indexOf(t),i,s,e,f;if(t!=null&&o!=-1)for(r.splice(o,1),i=u.length-1;i>=0;i--){for(s=u[i],e=!0,f=0;f<r.length;f++)if(n.isFunction(r[f][s])){e=!1;break}e&&u.splice(i,1)}},i.register(window.console,!0),i},d=new function(){function u(n,t){t=t||{},this.separator=t.separator||i.DEFAULT_SEPARATOR,this.equals=t.equals||i.DEFAULT_EQUALS,n&&this.parse(n)}var i=function(t){var i=new u;return i.parse(n.isString(t)?t:location.href),i};return i.URL_EXPRESSION=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i.COMPONENT_NAMES=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","hash"],i.PROTOCOL_SEPARATOR="://",i.EMPTY_HASH="!",i.DEFAULT_SEPARATOR="&",i.DEFAULT_EQUALS="=",u.prototype.init=function(){return this.components={source:t.EMPTY,protocol:t.EMPTY,authority:t.EMPTY,userInfo:t.EMPTY,user:t.EMPTY,password:t.EMPTY,host:t.EMPTY,port:t.EMPTY,relative:t.EMPTY,path:t.EMPTY,directory:t.EMPTY,file:t.EMPTY,query:t.EMPTY,hash:t.EMPTY},this.hashParam={},this.queryParam={},this},u.prototype.qualify=function(n){return n?n.indexOf("//")!=-1?n:n.indexOf("/")==0?[this.components.protocol,i.PROTOCOL_SEPARATOR,this.components.authority,n].join(t.EMPTY):[this.components.protocol,i.PROTOCOL_SEPARATOR,this.components.authority,this.components.directory,n].join(t.EMPTY):t.EMPTY},u.prototype.getHash=function(n){var i=[],r,u;for(r in this.hashParam)this.hashParam.hasOwnProperty(r)&&(i.push(r),i.push(this.equals),i.push(this.hashParam[r]));return(u=i.join(this.separator),u!=t.EMPTY&&n!=t.EMPTY)?n+u:u},u.prototype.getQuery=function(n){var i=[],r,u;for(r in this.queryParam)this.queryParam.hasOwnProperty(r)&&(i.push(r),i.push(this.equals),i.push(this.queryParam[r]));return(u=i.join(this.separator),u!=t.EMPTY&&n!=t.EMPTY)?n+u:u},u.prototype.getQueryParam=function(n){return this.queryParam[n]},u.prototype.getHashParam=function(n){return this.hashParam[n]},u.prototype.setQueryParam=function(n,t){return this.queryParam[n]=t,this},u.prototype.setHashParam=function(n,t){return this.hashParam[n]=t,this},u.prototype.removeQueryParam=function(n){return delete this.queryParam[n],this},u.prototype.removeHashParam=function(n){return delete this.hashParam[n],this},u.prototype.parse=function(n){var f,r,u,e;if(n==null)return this;for(this.init(),f=i.URL_EXPRESSION.exec(n),r=i.COMPONENT_NAMES.length-1;r>0;r--)this.components[i.COMPONENT_NAMES[r]]=f[r]||t.EMPTY;return u=this.components.hash,e=this.components.query,u==i.EMPTY_HASH&&(u=t.EMPTY),this.hashParam=i.parseQuery(u),this.queryParam=i.parseQuery(e),this},u.prototype.toString=function(){var n=this.components.protocol?t.concat(this.components.protocol,i.PROTOCOL_SEPARATOR):t.EMPTY;return t.concat(n,this.components.authority,this.components.path,i.serializeParams(this.queryParam,{prefix:"?",encode:!0}),i.serializeParams(this.hashParam,{prefix:"#",encode:!1}))},i.combine=function(n,i){for(var r=t.concat(n,"/",i);r.match(/[^\/]+\/\.\.\//);)r=r.replace(/[^\/]+\/\.\.\//,"");return r.replace(/\/{2,}/g,"/")},i.getQueryParam=function(n,t){return(new u).getQueryParam(n)||t},i.getHashParam=function(n,t){return(new u).getHashParam(n)||t},i.getHash=function(){return String(location.hash).substring(1)},i.getQuery=function(){return String(location.search).substring(1)},i.setHashParam=function(){var r=i(location.href),u;if(arguments.length==2)r.setHashParam(arguments[0],arguments[1]);else if(arguments.length==1)if(n.isObject(arguments[0]))for(u in arguments[0])r.setHashParam(u,arguments[0][u]);else r.setHashParam(arguments[0],t.EMPTY);else return;i.setHash(r.getHash())},i.setHash=function(n){n==t.EMPTY&&(n=i.EMPTY_HASH),window.location.hash=n},i.removeHashParam=function(n){var t=new u(location);t.removeHashParam(n),i.setHash(i.getHash())},i.getFileExtension=function(n){var t=n?n.lastIndexOf("."):-1;return t>-1?n.slice(t+1):""},i.getFileName=function(n){return String(n).match(/[^\\\/]*$/)[0]},i.parseQuery=function(r,u){var s={separator:i.DEFAULT_SEPARATOR,equals:i.DEFAULT_EQUALS},h,f,o;if(u&&u.separator&&(s.separator=u.separator),u&&u.equals&&(s.equals=u.equals),!r)return{};for(h=String(r).split(s.separator),f={},o=0;o<h.length;o++)if(h[o].length!=0){var c=h[o].split(s.equals),e=c[0],l=c[1]||t.EMPTY;f[e]!=null?(n.isArray(f[e])||(f[e]=[f[e]]),f[e].push(l)):f[e]=l}return f},i.serializeParams=function(r,u,f,e){var s,o,c,l,h;if(r==null)return null;n.isString(f)||(f=i.DEFAULT_SEPARATOR),n.isString(e)||(e=i.DEFAULT_EQUALS),s=[];for(o in r)r.hasOwnProperty(o)&&(c=u?encodeURIComponent(o):o,l=u?encodeURIComponent(r[o]||t.EMPTY):r[o],l?s.push(c+e+l):s.push(c));return(h=s.join(f),opt.prefix&&h.length)?t.concat(opt.prefix,h):h},i.qualify=function(n){var t=r("base[href]").attr("href")||document.location.href;return new u(t).qualify(n)},i},g=new function(){function t(n,t,r,u,f,e){var o=n+"="+encodeURIComponent(t);return r&&(o+="; expires="+c(r).toGMTString()),u&&(o+="; domain="+u),f&&(o+="; path="+f),e&&(o+="; secure=true"),document.cookie=o,i(n)}function i(n){for(var i=document.cookie.split("; "),s,r,f,e,u,o,t=0;t<i.length;t++)if(s=i[t].substring(0,i[t].indexOf("=")),r=i[t].substring(i[t].indexOf("=")+1,i[t].length),s==n){if(r.indexOf("&")!=-1){for(f=r.split("&"),e={},u=0;u<f.length;u++)o=f[u].split("="),e[o[0]]=o[1];return e}return decodeURIComponent(r)}return null}function r(n){var t=n?n+"=null;":"null;";document.cookie=t+"expires="+(new Date).toGMTString()}function n(){return arguments.length==0?String(document.cookie):arguments.length==1?Cookie.get.apply(this,arguments):t.apply(this,arguments)}return n.get=i,n.set=t,n.remove=r,n},nt=new function(){function c(n){var t={name:"XML Parse Error",error:!1,data:{line:1,column:0}},r,u;if(f?(r=n.getElementsByTagNameNS(s,"parsererror")[0],r!=null&&(u=i.text(r).replace(/line(?: number)? (\d+)(?:,)?(?: at)? column (\d+):/i,function(n,i,r){return t.line=parseInt(i),t.column=parseInt(r),n+"\n"}),t.error=!0,t.message=u)):n.parseError!=0&&(t.error=!0,t.message=n.parseError.reason,n.parseError.line&&(t.data.line=n.parseError.line),n.parseError.column&&(t.data.column=n.parseError.column)),t.error==!0)throw error(t);}function y(){if(o==null){o=new DOMParser;try{s=o.parseFromString("INVALID XML","text/xml").getElementsByTagName("*")[0].namespaceURI}catch(n){h=!0}}return o}var o,s,h=!1,l=document.implementation,f=window.XMLSerializer!=null,a="http://www.w3.org/1999/xhtml",v=5,u={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},i=function i(t){return n.isNode(t)?t:n.isString(t)&&t.trim().indexOf("<")==0?i.document(t):null};return i.text=function(){for(var c=t.EMPTY,h=null,l={},e,o,s,f,r=0;r<3;r++){if(arguments.length<r+1)break;e=arguments[r],n.isNode(e)?h=e:n.isString(e)?c=e:n.isObject(e)&&(l=e)}if(o=[],c==t.EMPTY&&h==null)return null;for(o=c==t.EMPTY&&h!=null?[h]:i.select(c,h||document,l),s=[],r=0;r<o.length;r++){f=o[r],f.nodeType==u.DOCUMENT&&(f=f.documentElement);switch(f.nodeType){case u.TEXT:case u.COMMENT:s.push(f.nodeValue);break;default:f.textContent!=null?s.push(f.textContent):o.text!=null?s.push(f.text):s.push(o.innerText)}}return s.join(t.EMPTY)},i.toXml=function(t){return(n.isString(t)&&(t=i.select(t)[0]),f)?t==document||t.ownerDocument==document?i.serialize(t):(new XMLSerializer).serializeToString(Node(t)):t.xml},i.serialize=function(n){var r,s,o,f,h,c,e;if(n==null||n.nodeType==null)return t.EMPTY;if(n.nodeType==u.DOCUMENT)return i.serialize(n.documentElement);if(r=[],s=!1,n.nodeType==u.ELEMENT){for(o=n.nodeName,n.namespaceURI==a&&(o=o.toLowerCase(),s=!0),r.push("<"),r.push(o),f=0;f<n.attributes.length;f++)(h=n.attributes[f].name,c=n.getAttribute(h),h=="xmlns"&&s)||(r.push(" "),r.push(n.attributes[f].name),r.push('="'),r.push(i.escape(c,!0)),r.push('"'));if(n.childNodes.length==0)r.push("/>");else{for(r.push(">"),f=0;f<n.childNodes.length;f++)e=n.childNodes[f],e.nodeType==u.ELEMENT&&r.push(i.serialize(e)),e.nodeType==u.COMMENT&&(r.push("<!--"),r.push(i.text(e)),r.push("-->")),e.nodeType==u.CDATA_SECTION&&(r.push("<![CDATA["),r.push(i.text(e)),r.push("]\]>")),e.nodeType==u.TEXT&&r.push(i.escape(i.text(e)));r.push("<\/"),r.push(o),r.push(">")}}return r.join(t.EMPTY)},i.toObject=function(r){var e,h,o,f,s;if(r==null||r.nodeType==null)return null;if(e={},r.nodeType==u.DOCUMENT)h=r.documentElement.nodeName,e[h]=i.toObject(r.documentElement);else if(r.nodeType==u.ELEMENT){for(o=0;o<r.attributes.length;o++)e[r.attributes[o].name]=r.getAttribute(r.attributes[o].name);for(o=0;o<r.childNodes.length;o++)f=r.childNodes[o],f.nodeType==u.ELEMENT&&(s=i.toObject(f),e[f.nodeName]!=null?(n.isArray(e[f.nodeName])||(e[f.nodeName]=[e[f.nodeName]]),e[f.nodeName].push(s)):e[f.nodeName]=s),f.nodeType==u.TEXT&&f.nodeValue.trim()!=t.EMPTY&&(e.$text=f.nodeValue)}return e},i.resolver=function(t){return e.assert(n.isObject(t),"Argument 'namespaces' should be an object"),function(n){return t[n]}},i.select=function(t,r,f){var o,s,e;if(arguments.length==2&&n.isString(arguments[1])&&(t=arguments[0],f=arguments[1]),n.isNode(r)||(r=document),o=r.nodeType==u.DOCUMENT?r:r.ownerDocument,window.ActiveXObject){s=[];for(e in f)f.hasOwnProperty(e)&&s.push('xmlns:{0}="{1}"'.format(e,f[e]));return o.setProperty("SelectionNamespaces",s.join(" ")),r.selectNodes(t)}for(var a=f?i.resolver(f):null,c=o.evaluate(t,r,a,v,null),h=c.iterateNext(),l=[];h;)l.push(h),h=c.iterateNext();return l},i.load=function(t,u,f){return e.assert(n.isString(t),"Argument 'url' is required"),r.ajax(t,{complete:function(t){var r;try{r=i.document(t.responseText),n.isFunction(u)&&u(r)}catch(e){if(n.isFunction(f))f(e);else throw e;}},error:function(t,i,r){n.isFunction(f)&&f(r)}})},i.document=function(r){n.isDocument(r)&&(r=i.serialize(r));var u=null;return f?n.isString(r)?(u=y().parseFromString(r,"text/xml"),h||c(u)):u=l.createDocument(t.EMPTY,t.EMPTY,null):window.ActiveXObject&&(u=new ActiveXObject("MSXML2.DomDocument"),r&&(u.loadXML(r),c(u))),u},i.processor=function(n){var t,u,r;return(n=i(n),n==null)?null:(t=null,f?(t=new XSLTProcessor,t.importStylesheet(n)):(u=i.document(n.xml),r=new ActiveXObject("MSXML2.XslTemplate"),r.stylesheet=u,t=r.createProcessor()),t)},i.transform=function(t,r){e.assert(n.isDocument(t),"Argument 'document' should be a document."),e.assert(!n.isNull(r),"Argument 'xslProcessor' is required");var u=null;return f?u=r.transformToDocument(t):(u=i.document(),r.input=t,r.output=u,r.transform()),u},i.escape=function(n,t){var i=String(n).replace(/&(?!amp;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return t&&(i=i.replace(/\"/g,"&quot;")),i},i.nodeType=u,i},y=u.extend(function(t){function o(){u+=1,f.fire("setup",{total:i.length,current:u}),u==i.length&&s()}function s(){f.fire("done"),n.isFunction(t)&&t()}this.construct("setup","done");var f=this,i=[],u=0;this.register=function(t,u){return e.assert(n.isObject(t),"Argument 'module' is required"),e.assert(n.isFunction(t.setup),"The 'module' argument must have a 'setup' method"),i.push({setup:r.proxy(t.setup,t),dispose:r.proxy(t.dispose,t),async:u||!1}),e.info("Registered module {0}",n.isFunction(t)?Function.getName(t):Function.getName(t.constructor)),t},this.setup=function(){var n,t;if(i.length==0)s();else for(u=0,n=0;n<i.length;n++)t=i[n],t.async?t.setup(o):(t.setup(),o())},this.dispose=function(){for(var t,n=0;n<i.length;n++)t=i[n],t.dispose&&t.dispose()}}),tt=new function(){this.Key={TAB:9,CONTROL:17,SHIFT:16,ALT:18,ENTER:13,UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:46,BACKSPACE:8,ESCAPE:27}},h=new function(){function n(n){return n||window.event}return n.preventDefault=function(t){return t=n(t),t.preventDefault&&t.preventDefault(),!1},n.cancel=function(t){return t=n(t),t!=null&&(t.cancelBubble=!0,t.returnValue=!1,t.stopPropagation&&t.stopPropagation()),!1},n.create=function(t,i,r){return new n.Event(t,i,r)},n.Event=function(n,t,i){this.source=n,this.type=t,this.name=t,this.cancel=!1,this.data={};for(var r in i)i.hasOwnProperty(r)&&(this.data[r]=i[r])},n},it=new function(){function e(){t.active=!1,t.fire("stop",{specs:n}),document.removeEventListener("mousemove",o,!0),document.removeEventListener("touchmove",o,!0),document.removeEventListener("mouseup",e,!0),document.removeEventListener("touchend",e,!0),w(),i=null}function o(r){var o=h(r),b=a.isTouchDevice?o.pageX:o.clientX,k=a.isTouchDevice?o.pageY:o.clientY,d=b-s,g=k-l,c=Math.max(Math.min(n.maxX,v+d),n.minX),w=Math.max(Math.min(n.maxY,y+g),n.minY),u,e,f;return t.__listeners.beforemove.length&&(u=h.create(t,"beforemove"),n.moveX&&(u.data.targetX=c),n.moveY&&(u.data.targetY=w),t.fire(u),c=u.data.targetX,w=u.data.targetY),e=i.position(),n.moveX&&i.css("left",c),n.moveY&&i.css("top",w),f=i.position(),(f.left!=e.left||f.top!=e.top)&&t.fire("move",f),n.accelX=f.left-e.left,n.accelY=f.top-e.top,p(),h.cancel(r)}function d(){var n=r("iframe");n.length>0&&(w(),n.each(function(n,t){if(t.offsetHeight>0){var i=document.createElement("div");i.iframe=t,i.style.cssText=b,i.className=k,document.body.appendChild(i),f.push(i)}}),p())}function p(){for(var n,i,t=f.length-1;t>=0;t--)n=f[t],i=r(n.iframe).offset(),n.style.left=i.left+"px",n.style.top=i.top+"px",n.style.width=n.iframe.offsetWidth+"px",n.style.height=n.iframe.offsetHeight+"px"}function w(){for(var n=f.length-1;n>=0;n--)f[n].parentNode.removeChild(f[n]),f.pop()}var n={},s,l,v,y,i=null,b="position: absolute; background: #fff; opacity: .01; z-index:10000;",k="drag-overlay-"+c.time(),f=[],t=new u("start","beforemove","move","stop");return t.active=!1,t.start=function(u,f,c){var p=u||window.event,w,b;return p==null?!0:(p.originalEvent&&(p=p.originalEvent),i=r(f),i.length==0)?!0:(c==null&&(c={}),n.moveX=c.moveX!==!1,n.moveY=c.moveY!==!1,n.accelX=0,n.accelY=0,!n.moveX&&!n.moveY)?!0:(n.minX=isNaN(c.minX)?Number.NEGATIVE_INFINITY:c.minX,n.maxX=isNaN(c.maxX)?Number.POSITIVE_INFINITY:c.maxX,n.minY=isNaN(c.minY)?Number.NEGATIVE_INFINITY:c.minY,n.maxY=isNaN(c.maxY)?Number.POSITIVE_INFINITY:c.maxY,s=a.isTouchDevice?p.pageX:p.clientX,l=a.isTouchDevice?p.pageY:p.clientY,w=i.position(),b=i.offset(),v=isNaN(w.left)?b.left:w.left,y=isNaN(w.top)?b.top:w.top,document.addEventListener("mouseup",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("mousemove",o,!0),document.addEventListener("touchmove",o,!0),d(),t.active=!0,t.fire("start"),h.cancel(u))},t},v=new function(){var t,i;this.easeNone=function(n,t,i,r){return i*n/r+t},this.easeIn=function(n,t,i,r){return i*n/r+t},this.easeOut=function(n,t,i,r){return i*n/r+t},this.easeInOut=function(n,t,i,r){return i*n/r+t},this.easeInQuad=function(n,t,i,r){return i*(n/=r)*n+t},this.easeOutQuad=function(n,t,i,r){return-i*(n/=r)*(n-2)+t},this.easeInOutQuad=function(n,t,i,r){return(n/=r/2)<1?i/2*n*n+t:-i/2*(--n*(n-2)-1)+t},this.easeInCubic=function(n,t,i,r){return i*(n/=r)*n*n+t},this.easeOutCubic=function(n,t,i,r){return i*((n=n/r-1)*n*n+1)+t},this.easeInOutCubic=function(n,t,i,r){return(n/=r/2)<1?i/2*n*n*n+t:i/2*((n-=2)*n*n+2)+t},this.easeInQuart=function(n,t,i,r){return i*(n/=r)*n*n*n+t},this.easeOutQuart=function(n,t,i,r){return-i*((n=n/r-1)*n*n*n-1)+t},this.easeInOutQuart=function(n,t,i,r){return(n/=r/2)<1?i/2*n*n*n*n+t:-i/2*((n-=2)*n*n*n-2)+t},this.easeInQuint=function(n,t,i,r){return i*(n/=r)*n*n*n*n+t},this.easeOutQuint=function(n,t,i,r){return i*((n=n/r-1)*n*n*n*n+1)+t},this.easeInOutQuint=function(n,t,i,r){return(n/=r/2)<1?i/2*n*n*n*n*n+t:i/2*((n-=2)*n*n*n*n+2)+t},this.easeInExpo=function(n,t,i,r){return n==0?t:i*Math.pow(2,10*(n/r-1))+t},this.easeOutExpo=function(n,t,i,r){return n==r?t+i:i*(-Math.pow(2,-10*n/r)+1)+t},this.easeInOutExpo=function(n,t,i,r){return n==0?t:n==r?t+i:(n/=r/2)<1?i/2*Math.pow(2,10*(n-1))+t:i/2*(-Math.pow(2,-10*--n)+2)+t},this.easeInSine=function(n,t,i,r){return-i*Math.cos(n/r*(Math.PI/2))+i+t},this.easeOutSine=function(n,t,i,r){return i*Math.sin(n/r*(Math.PI/2))+t},this.easeInOutSine=function(n,t,i,r){return-i/2*(Math.cos(Math.PI*n/r)-1)+t},this.easeInCirc=function(n,t,i,r){return-i*(Math.sqrt(1-(n/=r)*n)-1)+t},this.easeOutCirc=function(n,t,i,r){return i*Math.sqrt(1-(n=n/r-1)*n)+t},this.easeInOutCirc=function(n,t,i,r){return(n/=r/2)<1?-i/2*(Math.sqrt(1-n*n)-1)+t:i/2*(Math.sqrt(1-(n-=2)*n)+1)+t},this.easeInBack=function(n,t,i,r,u){return u==undefined&&(u=1.70158),i*(n/=r)*n*((u+1)*n-u)+t},this.easeOutBack=function(n,t,i,r,u){return u==undefined&&(u=1.70158),i*((n=n/r-1)*n*((u+1)*n+u)+1)+t},this.easeInOutBack=function(n,t,i,r,u){return(u==undefined&&(u=1.70158),(n/=r/2)<1)?i/2*n*n*(((u*=1.525)+1)*n-u)+t:i/2*((n-=2)*n*(((u*=1.525)+1)*n+u)+2)+t},this.easeInElastic=function(n,t,i,r,u,f){var e;return n==0?t:(n/=r)==1?t+i:(f||(f=r*.3),!u||u<Math.abs(i)?(u=i,e=f/4):e=f/(2*Math.PI)*Math.asin(i/u),-(u*Math.pow(2,10*(n-=1))*Math.sin((n*r-e)*2*Math.PI/f))+t)},this.easeOutElastic=function(n,t,i,r,u,f){var e;return n==0?t:(n/=r)==1?t+i:(f||(f=r*.3),!u||u<Math.abs(i)?(u=i,e=f/4):e=f/(2*Math.PI)*Math.asin(i/u),u*Math.pow(2,-10*n)*Math.sin((n*r-e)*2*Math.PI/f)+i+t)},this.easeInOutElastic=function(n,t,i,r,u,f){var e;return n==0?t:(n/=r/2)==2?t+i:(f||(f=r*.3*1.5),!u||u<Math.abs(i)?(u=i,e=f/4):e=f/(2*Math.PI)*Math.asin(i/u),n<1)?-.5*u*Math.pow(2,10*(n-=1))*Math.sin((n*r-e)*2*Math.PI/f)+t:u*Math.pow(2,-10*(n-=1))*Math.sin((n*r-e)*2*Math.PI/f)*.5+i+t},this.easeInBounce=function(n,t,i,r){return(n/=r)<1/2.75?i*7.5625*n*n+t:n<2/2.75?i*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?i*(7.5625*(n-=2.25/2.75)*n+.9375)+t:i*(7.5625*(n-=2.625/2.75)*n+.984375)+t},this.easeOutBounce=function(n,t,i,r){return i-this.easeOut(r-n,0,i,r)+t},this.easeInOutBounce=function(n,t,i,r){return n<r/2?this.easeIn(n*2,0,i,r)*.5+t:this.easeOut(n*2-r,0,i,r)*.5+i*.5+t},this.sineLinear=function(n,t,i,r,u){r=r/1e3,n=1e3-n;var f=u*Math.sin(r*n);return e("Y: {0} * Math.sin(({1} * {2})) = {3}",u,r,n,f),f},t={};for(i in this)this.hasOwnProperty(i)&&n.isFunction(this[i])&&(t[i]=function(){var n=arguments.callee.fx;return n.apply(this,f.fromArguments(arguments,1))},t[i].fx=this[i]);t.def="easeOutQuad",t.swing=function(n,t,i,r,u){return jQuery.easing[jQuery.easing.def](n,t,i,r,u)},jQuery.extend(jQuery.easing,t)},rt=new function(){function h(){function r(){n.effect.init&&n.effect.init(i,n),i.fireEvent("start"),i.animating=!0,u(f(e,i))}var i=this,n=this.__transition,o;n.effect=t.Transitions[n.effect]||t.Transitions.horizontalOpen,n.easingFx=v[n.easing]||v.easeOutQuad,n.from=this.cloneCurrent(),n.to instanceof Image?r():(o=n.to,n.to=new Image,n.to.onload=r,n.to.src=o)}function a(n){function i(){t.$image2.attr("src",n.to.src),t.$image2.css({opacity:0,display:"block"}),t.$image2.animate({opacity:1}),t.$element.animate({opacity:0},{duration:n.duration,easing:n.easing,progress:function(n,i){t.fireEvent("progress",{progress:i})},complete:function(){var n=t.$image2,i=t.$element;t.$element.hide().addClass("image2"),t.$image2.removeClass("image2"),t.$element=n,t.$image2=i,t.fireEvent("done")}}),t.fireEvent("start")}var t=this;n.to instanceof Image?i():(n.to=new Image,n.to.onload=i,n.to.src=src)}function e(){var t=c.time(),n=this.__transition,i=n.easingFx(t-n.start,0,1,n.duration);if(t>=n.end)return this.clear(),this.fireEvent("done"),this.animating=!1,this.drawImage(n.to);n.effect.render(this,n,i),this.fireEvent("progress",{progress:i}),u(f(e,this))}function t(n){return new i(n)}function y(){var n=document.createElement("canvas");return!(n==null||n.getContext==null||n.getContext("2d")==null)}var p=this,i=l.extend(function(n){var o,f,t,i,s,u,e;if(this.construct(n,"start","progress","done"),o=y(),o)f=this.$element.prop("tagName"),f=="CANVAS"?this.canvas=this.$element[0]:(t=this.$element.parent().find("canvas")[0],t==null&&(t=document.createElement("canvas"),t.width=this.$element.width(),t.height=this.$element.height(),this.$element.parent().append(t)),f=="IMG"&&(i=new Image,s=this,i.onload=function(){(t.width==0||t.height==0)&&(t.width=i.width,t.height=i.height);var n=t.getContext("2d");n.drawImage(i,0,0,t.width,t.height)},i.src=this.$element.prop("src")),this.canvas=t,this.context=t.getContext("2d"),this.$element.hide());else{for(this.$image2=r("<img/>"),u=0;u<this.$element[0].attributes.length;u++)e=this.$element[0].attributes[u],this.$image2.attr(e.name,e.value);this.$image2.hide(),this.$image2.addClass("image2"),this.$element.parent().append(this.$image2)}}),s,u,f;return i.prototype.drawImage=function(n){return this.clear(),this.context.drawImage(n,0,0,this.canvas.width,this.canvas.width*n.height/n.width)},i.prototype.cloneCurrent=function(){var n=document.createElement("canvas");return n.width=this.canvas.width,n.height=this.canvas.height,n.getContext("2d").drawImage(this.canvas,0,0,n.width,n.height),n},i.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.transition=function(n){var i=this.__transition=r.extend(t.transitionDefaults,n);if(i.start)this.on("start",i.start);if(i.progress)this.on("progress",i.progress);if(i.done)this.on("done",i.done);i.start=c.time(),i.end=i.start+i.duration,this.canvas!=null?h.call(this,n):a.call(this,n)},t.getData=function(n){var t=document.createElement("canvas"),i,r;return t.width=n.width,t.height=n.height,i=t.getContext("2d"),i.drawImage(n,0,0,t.width,t.height),r=i.getImageData(0,0,t.width,t.height),t=null,i=null,r},t.transitionDefaults={duration:1e3,transition:"horizontalOpen",easing:"easeOutExpo"},s=new function(){var u=o.extend(function(t){t&&n.isFunction(t.init)&&(this.init=t.init),t&&n.isFunction(t.render)&&(this.render=t.render)}),i;u.prototype.init=function(n,t){this.options=r.extend({},t.options)},u.prototype.render=function(){},i=o.extend(function(n){this.clipFunction=n}),i.prototype.render=function(n,t,i){var u=n.canvas,r=n.canvas.getContext("2d");n.drawImage(t.from),r.save(),r.beginPath(),this.clipFunction(r,u.width,u.height,i),r.clip(),n.drawImage(t.to),r.restore()},this.clock=new i(function(n,t,i,r){return n.moveTo(t/2,i/2),n.arc(t/2,i/2,Math.max(t,i),0,Math.PI*2*r,!1)}),this.circle=new i(function(n,t,i,r){return n.arc(t/2,i/2,.6*r*Math.max(t,i),0,Math.PI*2,!1)}),this.diamond=new i(function(n,t,i,r){var e,o,u,f;return f=t/2,u=i/2,e=r*i,o=r*t,n.moveTo(f,u-e),n.lineTo(f+o,u),n.lineTo(f,u+e),n.lineTo(f-o,u)}),this.verticalOpen=new i(function(n,t,i,r){var e,s,u,f,c,o,p,l,a,h,v,y;for(f=8,o=i/(2*f),a=o,c=r*t/2,h=t/2-c,v=t/2+c,p=h-a,l=v+a,n.moveTo(h,0),u=0;0<=f?u<=f:u>=f;0<=f?u++:u--)e=2*u*o,s=e+o,n.lineTo(p,e),n.lineTo(h,s);for(n.lineTo(l,i),y=[],u=f;f<=0?u<=0:u>=0;f<=0?u++:u--)e=2*u*o,s=e-o,n.lineTo(v,e),y.push(n.lineTo(l,s));return y}),this.horizontalOpen=new i(function(){return context.rect(0,(1-progress)*height/2,width,height*progress)}),this.horizontalSunblind=new i(function(n,t,i,r){var u,e,f,o;for(r=1-(1-r)*(1-r),f=6,e=i/f,o=[],u=0;0<=f?u<=f:u>=f;0<=f?u++:u--)o.push(n.rect(0,e*u,t,e*r));return o}),this.verticalSunblind=new i(function(n,t,i,r){var u,e,f,s,o;for(r=1-(1-r)*(1-r),f=10,e=t/f,o=[],u=0;0<=f?u<=f:u>=f;0<=f?u++:u--)s=Math.max(0,Math.min(2*r-(u+1)/f,1)),o.push(n.rect(e*u,0,e*s,i));return o}),this.circles=new i(function(n,t,i,r){var h,c,f,u,s,l,v,p,y,e,o,a;for(u=6,f=Math.floor(u*t/i),c=t/f,h=i/u,p=Math.max(t,i),v=.7*Math.max(c,h),a=[],e=0;0<=f?e<=f:e>=f;0<=f?e++:e--)a.push(function(){var i;for(i=[],o=0;0<=u?o<=u:o>=u;0<=u?o++:o--)s=(e+.5)*c,l=(o+.5)*h,y=Math.max(0,Math.min(2*r-s/t,1))*v,n.moveTo(s,l),i.push(n.arc(s,l,y,0,Math.PI*2,!1));return i}());return a}),this.squares=new i(function(n,t,i,r){var s,h,f,u,c,l,a,v,y,e,o,p;for(r=1-(1-r)*(1-r),u=5,f=Math.floor(u*t/i),h=t/f,s=i/u,p=[],e=0;0<=f?e<=f:e>=f;0<=f?e++:e--)p.push(function(){var f;for(f=[],o=0;0<=u?o<=u:o>=u;0<=u?o++:o--)v=h*e,y=s*o,c=Math.max(0,Math.min(3*r-v/t-y/i,1)),a=h*c,l=s*c,f.push(n.rect(v-a/2,y-l/2,a,l));return f}());return p}),this.fadeLeft=new u({init:function(n,i){var f,u;for(this.options=r.extend({direction:"right"},i.options),i.randomTrait=[],i.fromData=t.getData(i.from),i.toData=t.getData(i.to),i.output=n.context.createImageData(n.canvas.width,n.canvas.height),f=n.canvas.height,u=0;0<=f?u<=f:u>=f;0<=f?u++:u--)i.randomTrait[u]=Math.random()},render:function(n,t,i){for(var s=150,b=n.canvas.height,o=n.canvas.width,v=t.fromData.data,y=t.toData.data,h=t.output.data,p=o*i/s,c,u,f,e,r=0;r<o;++r)for(c=r/s,u=0;u<n.canvas.height;++u){var l=(u*o+r)*4,a=Math.min(Math.max(c-p*(1+t.randomTrait[u]/10),0),1),w=1-a;for(f=0;f<3;++f)e=l+f,h[e]=a*v[e]+w*y[e];h[l+3]=255}return n.context.putImageData(t.output,0,0)}})},t.Transitions=s,u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)},f=function(n,t){return function(){return n.apply(t,arguments)}},t};i.Prototype=o,i.Dispatcher=u,i.Settings=s,i.Initializer=y,i.HtmlControl=l,i.type=n,i.string=t,i.array=f,i.date=c,i.error=p,i.log=e,i.css=k,i.dom=a,i.url=d,i.cookie=g,i.image=rt,i.xml=nt,i.const=tt,i.event=h,i.drag=it,i.easing=v,i.controls=new b,i.init=new y,i.init.register(i.controls,!0);r(window).on("ready",i.init.setup).on("unload",i.init.dispose);return i}